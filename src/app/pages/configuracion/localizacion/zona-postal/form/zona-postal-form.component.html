<mat-toolbar>
    <button mat-icon-button matTooltip="{{'button.back' | translate: {default: 'global.notfound'} | translate}}" routerLink="/configuracion/zona">
        <mat-icon>arrow_back</mat-icon>
    </button>
    <span class=" h1 mt-10" [@animate]="{value:'*',params:{delay:'100ms',x:'-25px'}}">
        {{'postalZone.form' | translate: {default: "global.notfound"} }}
  </span>
    <!-- <span fxFlex></span> -->
    <div fxLayout="row" fxFlex="1 1 0%" fxLayoutAlign="end center">
        
        <button mat-icon-button matTooltip="{{'button.ai' | translate: {default: 'global.notfound'} | translate }}" 
        *ngIf="zonaPostal.id" (click)="activateOrInactivate()">
            <mat-icon>check_circle</mat-icon>
        </button>
        <button mat-icon-button matTooltip="{{'button.save' | translate: {default: 'global.notfound'} | translate}}" (click)="save()" [disabled]="itemForm?.invalid">
            <mat-icon>trash</mat-icon>
        </button>
    </div>
</mat-toolbar>

<div  id="itemForm" class="form-container">
    <form [formGroup]="itemForm" *ngIf="itemForm" class="form-content" (ngSubmit)="save()">

        <div fxLayout="row wrap" fxLayoutAlign="center center"> 

            <div fxFlex="100" fxFlex.gt-xs="50" class="pr-4">
                <app-select-search [label]="'postalZone.country' | translate: {default: 'global.country'} | translate"
                    formControlName="pais" [required]="true" [elements]="paises.asObservable()"
                    [attributeName]="'nombre'" [errors]="f.pais?.errors">
                </app-select-search>
            </div>

            <div fxFlex="100" fxFlex.gt-xs="50">
                <app-select-search [label]="'postalZone.state' | translate: {default: 'global.state'} | translate"
                    formControlName="estado" [required]="true" [elements]="estados.asObservable()"
                    [attributeName]="'nombre'" [errors]="f.estado?.errors">
                </app-select-search>
            </div>

            <div fxFlex="100" fxFlex.gt-xs="50" class="pr-4">
                <app-select-search [label]="'postalZone.municipality' | translate: {default: 'global.municipality'} | translate"
                    formControlName="municipio" [required]="true" [elements]="municipios.asObservable()"
                    [attributeName]="'nombre'" [errors]="f.municipio?.errors">
                </app-select-search>
            </div>

            <div fxFlex="100" fxFlex.gt-xs="50">
                <app-select-search [label]="'postalZone.parish' | translate: {default: 'global.parish'} | translate"
                    formControlName="parroquia" [required]="true" [elements]="parroquias.asObservable()"
                    [attributeName]="'nombre'" [errors]="f.parroquia?.errors">
                </app-select-search>
            </div>

            <div fxFlex="100" fxFlex.gt-xs="60" class="pr-4">
                <mat-form-field appearance="outline" class="full-width">
                    <mat-label>{{'postalZone.name' | translate: {default: 'global.name'} | translate }}</mat-label>
                    <input matInput maxlength="100" name="nombre" formControlName="nombre" uppercase required>
                    <mat-error *ngIf="f.nombre.errors?.required">Requerido</mat-error>
                    <mat-error *ngIf="f.nombre.errors?.pattern">Caracter inválido</mat-error>
                </mat-form-field>
            </div>

            <div fxFlex="100" fxFlex.gt-xs="20" class="pr-4">
                <mat-form-field appearance="outline" class="full-width">
                    <mat-label>{{'postalZone.postalCode' | translate: {default: 'global.postalCode'} | translate }}</mat-label>
                    <input matInput maxlength="6" name="codigoPostal" formControlName="codigoPostal" uppercase required class="text-center">
                    <mat-error *ngIf="f.codigoPostal.errors?.required">Requerido</mat-error>
                    <mat-error *ngIf="f.codigoPostal.errors?.pattern">Caracter inválido</mat-error>
                    <mat-error *ngIf="f.codigoPostal.errors?.exists">
                        {{f.codigoPostal.errors?.exists}}
                    </mat-error>
                </mat-form-field>
            </div>

            <div fxFlex="100" fxFlex.gt-xs="20">
                <mat-form-field appearance="outline" class="full-width">
                    <mat-label>{{'postalZone.localCode' | translate: {default: 'global.localCode'} | translate }}</mat-label>
                    <input matInput maxlength="10" name="codigoLocal" formControlName="codigoLocal" uppercase class="text-center">
                    <mat-error *ngIf="f.nombre.errors?.pattern">Caracter inválido</mat-error>
                </mat-form-field>
            </div>

        </div>

    </form>
    <mat-toolbar>
        <div fxLayout="row" fxFlex="1 1 0%" fxLayoutAlign="end center" fxLayoutGap="24px">
            <button type="button" mat-button routerLink="/configuracion/zona">{{'button.cancel' | translate: {default: 'global.notfound'} | translate }}</button>
            <button color="primary" (click)="save()" mat-raised-button [disabled]="itemForm?.invalid ||  (!isNew && !zonaPostal.activo)">{{'button.save' | translate: {default: 'global.notfound'} | translate }}</button>
        </div>

    </mat-toolbar>
</div>
